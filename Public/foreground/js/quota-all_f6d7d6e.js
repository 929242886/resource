define("interface-widget-1:quota/context.js",function(t,n,e){var o={context:null},c={getContext:function(){return o.context},setContext:function(t){o.context=t}};e.exports=c});
;define("interface-widget-1:quota/quota.js",function(e,a,t){var o=e("system-core:context/context.js").instanceForSystem,i=e("base:widget/libs/jquerypacket.js"),s=o.message,n=o.log,c=window.yunData||c,u=e("base:widget/tools/tools.js"),d=['<div node-type="remaining" class="remaining" style="_visibility:visible;">','	<div node-type="capacity" class="capacity">','		<span class="ico icon-capa"></span>','		<div class="get-capacity">','			<span><a href="//yun.baidu.com/1t" target="_blank">免费领取2048G</a>容量啦~</span>',"		</div>","	</div>",'	<div node-type="quota-over-tips" class="quota-over-tips">','		<span node-type="quota-over-tips-click" class="quota-over-tips-close">×</span>','		<div node-type="quota-over-text quota-over-tips-click" class="quota-over-text">',"		</div>",'		<em class="quota-over-bg"></em>',"	</div>",'	<ul class="remaining-quota">','		<li class="g-clearfix bar">','		<div node-type="quota-full" class="remainingSpaceUi">','			<span node-type="quota-perc" class="remainingSpaceUi_span"></span>',"		</div>",'		<div class="remainingSpace">','			<span node-type="quota-used" class="bold">0</span>/<span node-type="quota-total">0</span>',"		</div>","		</li>",'		<li class="add"><a node-type="quota-add-disk" target="_blank" href="//yun.baidu.com/buy/center?tag=8&from=kr">扩容</a></li>',"	</ul>","</div>"].join(""),l={mod:"div.aside-absolute-container",capacity:'div[node-type~="capacity"]',quotaUsed:'span[node-type~="quota-used"]',quotaTotal:'span[node-type~="quota-total"]',quotaPerc:'span[node-type~="quota-perc"]',quotaFull:'div[node-type~="quota-full"]',awardDisk:'div[node-type~="award-disk-quota"]',addDisk:'a[node-type~="quota-add-disk"]',quotaOver:'li[node-type~="quota-over"]',quotaOverTips:'div[node-type~="quota-over-tips"]',overdueTips:'div[node-type~="overdue-tips"]',quotaOverLink:'a[node-type~="quota-over-link"]',quotaOverTipsClose:".quota-over-tips-close",quotaOverText:".quota-over-text",quotaOverTipsClick:'[node-type~="quota-over-tips-click"]'},r="/api/quota",p=function(e,a){i.ajax({url:r,data:e,type:"get",dataType:"json",success:function(e){a.call(void 0,e)}})},v=function(e,a){var t=""+e.expire;'true"'===t&&a.find(l.quotaOver).removeClass("hidden")},y=function(){i.get("/api/user/closeWindow",{type:"quota"},function(){})},q=function(){var e='您的容量将满!<a href="'+location.protocol+"//yun.baidu.com/buy/center?tag=8&from="+(1===+c.ISSVIP?"space-full3":"space-full")+'">立即购买超级会员</a>，拥有5T超大容量!',a='您的容量将满!<a href="'+location.protocol+'//yun.baidu.com/buy/center?tag=2&from=space-full3">购买容量套餐</a>',t=i(l.quotaOverText),o=i(l.quotaOverTips),s=i(l.quotaOverTipsClick);t.html(1===+c.ISSVIP?a:e),o.show(),s.one("click",function(){n.send({url:"/api/analytics",type:"web_aside_quota_"+(1===+c.ISVIP?1===+c.ISSVIP?"svip_renew_click":"renew_click":"buy_click"),from:1===+c.ISSVIP?"space-full3":"space-full"}),y(),o.hide()}),n.send({url:"/api/analytics",type:"web_aside_quota_"+(1===+c.ISVIP?1===+c.ISSVIP?"svip_renew_view":"renew_view":"buy_view"),from:1===+c.ISSVIP?"space-full3":"space-full"})},f=!1,m=function(e){e&&e.length?e.html(d):e=i(l.mod),p({checkexpire:1,checkfree:1},function(a){var t=u.toFriendlyFileSize(a.used),o=u.toFriendlyFileSize(a.total);e.find(l.quotaUsed).html(t),e.find(l.quotaTotal).html(o);var i=Math.min(100,a.used/a.total*100),s=parseFloat(a.total-a.used),n=e.find(l.capacity),d=e.find(l.quotaPerc),r=e.find(l.quotaOverTips);e.find(l.quotaPerc).css("width",i+"%"),90>=i&&i>60?d.css("background","#FC7736"):i>=90&&s>=0?(d.css("background","#c00").attr("title","你使用的容量已超过90%啦"),a.is_show_window&&1===+a.is_show_window&&(f=!0)):0>s?(d.css("background","#c00"),e.find(l.quotaOver).removeClass("hidden"),e.find(l.quotaOverTips).html("你的容量到期了"),e.find(l.quotaOverLink).html("购买").attr("href","//yun.baidu.com/buy/center?tag=8")):d.css("background","#74C709"),a.total<2199e9&&"none"===r.css("display")&&n.css("display","block"),v(a,e),c.QUOTAINFOS=c.QUOTAINFOS||{},c.QUOTAINFOS.total=a.total,c.QUOTAINFOS.used=a.used})};s.listenSystem("quota-change",function(e){m(null,e)}),t.exports={render:m,showQuotaTip:function(e){e&&f&&q()}}});
;define("interface-widget-1:quota/start.js",function(t,e,o){var a=t("interface-widget-1:quota/quota.js"),i={start:function(t,e){"showQuotaTip"===e.showType?a.showQuotaTip(!0):a.render(e.$container,e)}};o.exports=i});