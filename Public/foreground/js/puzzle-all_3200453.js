define("function-widget-1:puzzle/context.js",function(t,n,e){var o={context:null},c={getContext:function(){return o.context},setContext:function(t){o.context=t}};e.exports=c});
;define("function-widget-1:puzzle/start.js",function(t,e,i){var s=t("function-widget-1:puzzle/util/fileMeitu.js"),n=t("function-widget-1:puzzle/context.js"),l=new s;i.exports={start:function(t,e){var i;n.setContext(t),i="object"==typeof e&&e.filesList?e.filesList.length>0?e.filesList:[e.filesList]:t.list.getSelected(),l.build(i)}}});
;define("function-widget-1:puzzle/util/fileMeitu.js",function(require,exports,module){var $=require("base:widget/libs/jquerypacket.js"),ContextUtil=require("function-widget-1:puzzle/context.js"),localStorage=require("base:widget/storage/storage.js"),fileMeitu=function(){this.dialog=null},setParam=function(e,t,i){var o=new RegExp("(?:^|\\?|#|&)"+e+"=([^&#]*)(?:$|&|#)","i"),n=o.exec(i||location.href);return null!=n?i.replace(n[1],t):null};fileMeitu.prototype.build=function(e,t){var i,o=this,n=o.flashSupport(o.getFlashVersion()),l=e,a=[],r=l.length;if(r&&1===r)a.push(encodeURIComponent(setParam("size","c850_u580",l[0].thumb||l[0].thumbs.url3))),i=encodeURIComponent(l[0].path);else for(var u=0;u<l.length;u++){var s=setParam("size","c850_u580",l[u].thumb||l[u].thumbs.url3);a.push(encodeURIComponent(s))}return n?(localStorage.setItem("picArray",a),localStorage.setItem("picPath",i),"object"==typeof _hmt&&_hmt.push(["_trackEvent","图片在线编辑","单张页点击美化入口的次数"]),window.open(location.protocol+"//"+window.location.host+"/disk/editpic"),void("object"==typeof t&&t())):!1},fileMeitu.prototype.getFlashVersion=function(){var _this=this,f=null,n=navigator;if(n.plugins&&n.plugins.length){for(var ii=0,len=n.plugins.length;len>ii;ii++)if(-1!=n.plugins[ii].name.indexOf("Shockwave Flash")){f=n.plugins[ii].description.split("Shockwave Flash ")[1];break}}else if(window.ActiveXObject)for(var ii=11;ii>=2;ii--)try{var fl=eval("new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+ii+"');");if(fl){f=ii+".0";break}}catch(e){}return f},fileMeitu.prototype.flashSupport=function(e){return null==e||parseFloat(e,10)<10.2?(fileMeitu.dialog=ContextUtil.getContext().ui.confirm({title:"友好提示",body:"要使用图片在线编辑功能，您需要安装Flash播放器10.2.0 或更高的版本。",sureText:"安装",canceText:"取消",content:null,onSure:function(){window.open("http://get.adobe.com/cn/flashplayer"),fileMeitu.dialog.hide()},onCancel:function(){fileMeitu.dialog.hide()}}),fileMeitu.dialog.show(),!1):!0},module.exports=fileMeitu});