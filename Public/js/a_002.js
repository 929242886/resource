define("disk-system:widget/data/yunData.js",function(a,t,n){var i=(-1!==location.search.indexOf("yundata_debug=true")?1:"undefined"!=typeof disk&&disk.DEBUG?!1:0,{}),d={};i.data={},d.setData=function(a){if(1===arguments.length){if("object"==typeof a){for(var t in a)a.hasOwnProperty(t)&&(i.data[t]=a[t]);"function"==typeof Object.freeze&&Object.freeze(i.data)}window.yunData=window.yunData||{},window.yunData.ISYEARVIP=i.data.is_year_vip,window.yunData.ISVIP=i.data.is_vip,window.yunData.ISSVIP=i.data.is_svip,window.yunData.MYUK=i.data.uk,window.yunData.MYNAME=i.data.username,window.yunData.MYBDSTOKEN=i.data.bdstoken,window.yunData.MYBDUSS=i.data.XDUSS,window.yunData.LOGINSTATUS=i.data.loginstate,window.yunData.sampling=i.data.sampling.expvar?i.data.sampling.expvar.toString():i.data.sampling,window.yunData.ISFIRST=i.data.is_first,window.yunData.UINFO=i.data.uinfo,window.yunData.task_key=i.data.task_key,window.yunData.task_time=i.data.task_time,window.yunData.sign1=i.data.sign1,window.yunData.sign2=i.data.sign2,window.yunData.sign3=i.data.sign3,window.yunData.timestamp=i.data.timestamp,window.yunData.faceStatus=i.data.face_status,window.yunData.SERVERTIME=i.data.servertime,window.yunData.SHOWVIPAD=i.data.show_vip_ad||-1,window.yunData.VIPENDTIME=i.data.vip_end_time||-1}else 2===arguments.length&&window.yunData&&(window.yunData[arguments[0]]=arguments[1])},d.get=function(){return i.data},n.exports=d});
;define("disk-system:widget/system/util/FELog.js",function(e,t,a){function s(e){e?(this.url=""||e.url,this.logObjectName="fe_log_",this.baseParam=null||e.baseParam,this.sendBaseParamTag=e.sendBaseParamTag||!0):(this.url="",this.logObjectName="fe_log_",this.baseParam=null,this.sendBaseParamTag=!0),this.UrlLength=900}s.obtain=null,s.prototype={send:function(e){var t,a=e.url||this.url,s=(new Date).getTime(),n={};if(this.sendBaseParamTag)for(t in this.baseParam)n[t]="function"==typeof this.baseParam[t]?this.baseParam[t]():this.baseParam[t];var i={};for(t in e)"url"!=t&&(i[t]="function"==typeof e?e[t]():e[t]);for(var r=this._getRequestUrl(s,a,n,i),l=0,o=r.length;o>l;l++)this._request(s,l,r[l])},_request:function(e,t,a){var s=this.logObjectName+"_"+e+"_"+t;window[s]=new Image;var n=window[s];n.onload=n.onerror=function(){window[s]=null},n.src=a,n=null},_getRequestUrl:function(e,t,a,s){var n,i=[],r=[];if(a)for(n in a)r.push(n+"="+a[n]);r=r.join("&"),r=""==r?"":"&"+r;var l=t+"?_lsid="+e+"&_lsix=1"+r,o=1;for(n in s)if("[object Array]"===Object.prototype.toString.apply(s[n])){for(var h=s[n],g=[],u=l.length+n.length+2,f=0,m=h.length;m>f;f++)u+=h[f].length+1,u>this.UrlLength?(i.push(l+"&"+n+"="+g.join()),o++,g=[],u=l.length+n.length+2,l=t+"?_lsid="+e+"&_lsix="+o+r,f--):g.push(h[f]);g.length>0&&(l+="&"+n+"="+g.join())}else l.length+n.length>this.UrlLength&&(i.push(l),o++,l=t+"?_lsid="+e+"&_lsix="+o+r),l+="&"+n+"="+s[n];return i.push(l),i}},s.obtain=s.obtain||new s({url:"/api/analytics",logObjectName:"fe_log",baseParam:{page:1,clienttype:0},sendBaseParamTag:!1}),a.exports=s});define("disk-system:widget/pageModule/aside/aside.js",function(e){var t=e("base:widget/libs/jquerypacket.js"),i=e("base:widget/hash/hash.js"),s=e("system-core:data/faceData.js").getData(),o=e("system-core:system/baseService/message/message.js"),a=(e("base:widget/tools/tools.js"),e("system-core:context/context.js")),n=e("disk-system:widget/system/uiRender/buttonBox/buttonBox.js"),d=e("base:widget/historyManager/historyManager.js"),r={mod:"div.module-aside",listItem:'li[node-type~="list-item"]',sideMore:'a[node-type~="side-more"]',sideOptlist:'div[node-type~="side-optlist"]',picHotIco:'em[node-type~="pic-hot"]',picItem:'a[node-type~="pic-item"]',itemTitle:'span[node-type~="item-title"]',imgIcon:'span[node-type~="img-ico"]',itemHref:'a[node-type~="item-href"]'},l=t(r.mod),c=function(){var e='<li node-type="list-item" class="list-item"><a node-type="item-href" class="b-no-ln" hideFocus="true" href="javascript:void(O);"><span class="text"><span node-type="img-ico" class="img-ico"></span><span node-type="item-title"></span></span></a></li>';return e},m=function(){var e=function(e,i){var s,o;if(i.isVisible===!1?e.hide():e.show(),i.title&&e.find(r.itemTitle).text(i.title),i.iconClass&&e.find(r.imgIcon).addClass(i.iconClass),i.href&&e.find(r.itemHref).attr("href",i.href).removeAttr("cat"),i.guide){if(s=i.guide,"object"!=typeof s)throw new Error("[aside] The new nav item must has property: guide. And the guide must be an object");s.dom&&(o=t(s.dom),s.positionX&&o.css("left",s.positionX),s.positionY&&o.css("top",s.positionY),e.find(r.itemHref).append(o))}i.click&&"function"==typeof i.click&&e.bind("click",function(e){i.click.call(o,e)})};o.listen("nav-add-item",function(i){var s=t(r.listItem),o=t(c());e(o,i),i.index&&i.index<s.length?s.eq(i.index).after(o):s.last().after(o)}),o.listen("nav-change-item",function(i){var s,o=t(r.listItem);if(!(i.index&&i.index<o.length))throw new Error("[aside] The index of item which you will change must in the range of 0 ~ "+o.length);s=o.eq(i.index),e(s,i)})},g=function(){l.delegate(r.listItem,"mouseover",function(e){var i=t(e.target).closest(r.listItem);i.addClass("hover")}),l.delegate(r.listItem,"mouseout",function(e){var i=t(e.target).closest(r.listItem);i.removeClass("hover")}),l.delegate(r.listItem,"click",function(e){var i=t(e.target).closest(r.listItem);if(i.hasClass("active")&&"all"!==i.data("key"))return!1;l.find(r.listItem).removeClass("active"),i.addClass("active");var s=t(e.target).closest("a").attr("cat");s&&d.getDefault().navigate("category",{type:s})});var e,i=function(){window.clearTimeout(e),l.find(r.sideOptlist).show()},s=function(){window.clearTimeout(e),e=window.setTimeout(function(){l.find(r.sideOptlist).hide()},50)};l.delegate(r.sideMore,"mouseover",i),l.delegate(r.sideMore,"mouseout",s),l.delegate(r.sideOptlist,"mouseover",i),l.delegate(r.sideOptlist,"mouseout",s)},f=function(){{var e,t=a.instanceForSystem.pageInfo.currentPage,s=l.find(r.listItem),o=i.get("category/type"),n=i.get("path"),d=i.get("key");i.get("vmode")}if("disk-home"===t){if(o&&"3"!==o&&"undefined"!=typeof localStorage){var c=localStorage.getItem("chooseviewtype");c&&i.set("vmode",c)}e="all","4"===o&&(e="doc"),"1"===o&&(e="video"),"7"===o&&(e="mbt"),"2"===o&&(e="music"),"3"===o&&(e="pic"),"6"===o&&(e="other"),n&&""!==n&&(e="all"),d&&""!==d&&(e="all")}"recyclebin"===t&&(e="recyclebin"),"share-manage"===t&&(e="share"),"disk-pic"===t&&(e="pic");var m;for(m=0;m<s.length;m++)s.eq(m).removeClass("active"),s.eq(m).data("key")===e&&s.eq(m).addClass("active")},u=function(){g(),f(),m(),i.listen("category/type, path, key",function(){f()});var e=new n({name:"aside-middle",buttons:s.getButton("aside-middle"),container:t("<div>")}),a=new n({name:"aside-bottom",buttons:s.getButton("aside-bottom"),container:t("<div>")});l.find(".middle-button-container").html(e.$box.html()).prev(".item-separator").show(),l.find(".bottom-button-container").html(a.$box.html()).prev(".item-separator").show(),o.trigger("aside-render-finish")};a.extend({nav:{addItem:function(e){o.trigger("nav-add-item",e)},changeItem:function(e){o.trigger("nav-change-item",e)}}}),u()});
;define("disk-system:widget/pageModule/list/list-view/list-view-builder.js",function(e,t,i){var a=e("base:widget/libs/jquerypacket.js"),s=e("system-core:data/faceData.js").getData(),n=e("disk-system:widget/system/uiRender/buttonBox/buttonBox.js"),r=e("disk-system:widget/system/fileService/fileOperate/fileOperate.js"),l=e("base:widget/historyManager/historyManager.js"),c=e("base:widget/tools/service/tools.date.js"),o=e("base:widget/tools/service/tools.format.js"),d=e("base:widget/tools/service/tools.path.js"),h=e("system-core:context/context.js").instanceForSystem,g=e("system-core:system/baseService/message/message.js"),m=new n({name:"list",limit:2,buttons:s.getButton("list"),container:a("<div>")}),p={LIST:"list",CATEGORY:"category",SEARCHPATH:"searchPath",SEARCHGLOBAL:"searchGlobal",SEARCH:"search"},v=function(){var e=this.parent.listHeader.config.columns||[{width:60},{width:16},{width:23}],t=document.createElement("dd");return t.className="g-clearfix list-view-item",t.innerHTML='<span node-type="checkbox" class="checkbox"></span><div class="fileicon"></div><div class="file-name" style="width:'+e[0].width+'%"><div class="text"><a href="javascript:void(0);" class="filename"></a></div><div class="operate">'+m.$container.html()+'</div></div><div class="file-size" style="width:'+e[1].width+'%">-</div><div class="ctime" style="width:'+e[2].width+'%"></div><div class="path-info" style="width:'+(e[3]?e[3].width-1:0)+'%"><span class="search-feild" node-type="search-feild"></span></div>',t},f=null,u=null,b=function(){f=null,u=null},C=function(e,t){if(e&&0!==e.length)for(var i=0;i<e.length;i++){var s=a(e[i]),n=s.data("excludedir");if(n){var r=t.path.substring(1);-1!==n.indexOf(r)?s.addClass("g-disabled"):s.removeClass("g-disabled")}var l=s.data("includetype");if(l){var c=d.getFileCategory(t.path);-1===l.indexOf(c)?s.hide():s.show()}}},w=function(e){var t=/^[.,?\]})'";:`~!%&*|>，﹐。？、】）·！……’”；：]*/;if(e.highlighting&&e.highlighting.abstract){e.highlighting.abstractFixed=e.highlighting.abstract,e.highlighting.abstract=e.highlighting.abstract.replace(/\n+\s*\n/g,"\n"),e.highlighting.abstract=e.highlighting.abstract.replace(t,"");var i=e.highlighting.abstract;if(pos=i.search(/<em>/),pos>36){var a=pos-12;i=i.slice(a,i.length),e.highlighting.abstractFixed=i}e.highlighting.abstractFixed=e.highlighting.abstractFixed.replace(t,"")}return e},y=function(e,t,i){var s=t;null==s&&(s=this.buildView(e,t,i));var n=this.getElementDataByPosition(i),d=a(s),v=this.parent.cache.cacheName===p.SEARCHGLOBAL,b=this;if(v&&(d.addClass("list-view-vip-search"),n=w(n)),s.setAttribute("_position",i),s.setAttribute("_cmd_installed",1),this.isAllItemChecked()||this.isItemChecked(i)?d.addClass("item-active"):d.removeClass("item-active hover-item"),!s.getAttribute("_installed")){var y,k;d.mouseenter(function(){if(y=(new Date).getTime(),b.parent.isLocked())return!1;var e=a(this);return e.addClass("hover-item"),!1}).mouseleave(function(){if(b.parent.isLocked())return!1;var e=a(this);return e.removeClass("hover-item"),e.find(".g-dropdown-button").removeClass("button-open"),k=(new Date).getTime(),h.log.send({name:"listListHover",value:k-y}),!1}),d.click(function(e){var t=d.parent().children();t.removeClass("item-active"),b.setItemsChecked(!1);var i=(new Date).getTime();if(b.parent.isLocked())return!1;var s=parseInt(this.getAttribute("_position"),10),n=b.isItemChecked(s),r=b.getCheckedIndexs(),l=e.ctrlKey,c=a(this);if(e.shiftKey){var o=Math.min(s,f),g=Math.max(s,f),m=c,p=!1;if("number"==typeof u){var v=Math.min(s,u),C=Math.max(s,u);for(p=v===s;C>=v;)b.setItemChecked(v,!1),m.length>0&&m.removeClass("item-active"),m=p?m.next(".list-view-item"):m.prev(".list-view-item"),v++}for(m=c,p=o===s;g>=o;)b.setItemChecked(o,!0),m.length>0&&m.addClass("item-active"),m=p?m.next(".list-view-item"):m.prev(".list-view-item"),o++;u=s}else u=null,l||(r.length>0&&(n===!1||n&&r.length>1)&&(b.setItemsChecked(!1),c.siblings(".list-view-item").removeClass("item-active")),n&&r.length>1&&(n=!1)),b.setItemChecked(s,!n),n?c.removeClass("item-active"):c.addClass("item-active"),f=s;var w=(new Date).getTime();h.log.send({name:"listListSingleSel",value:w-i})}),d.delegate(".filename","click",function(){if(b.parent.isLocked())return!1;var e=parseInt(a(this).closest(".list-view-item")[0].getAttribute("_position"),10),t=b.getElementDataByPosition(e);if(t.isdir)b.parent.cache.cacheName===p.SEARCH||b.parent.cache.cacheName===p.SEARCHGLOBAL||b.parent.cache.cacheName===p.SEARCHPATH?l.assignUrlHash("list/path="+encodeURIComponent(t.path)+"&vmode="+l.getCurrentParams().vmode):b.parent.addHistory(t.server_filename,t.server_filename);else{var i=d.data("plugin");if(!i||!i.length)return!0;g.trigger("plugin:"+i,{filesList:[t]})}return!1}).delegate(".g-button","click",function(){if(b.parent.isLocked())return!1;var e=parseInt(a(this).closest(".list-view-item")[0].getAttribute("_position"),10),t=b.getElementDataByPosition(e),i=a(this).next(".menu");if(i.length){var s=i.find(".g-button-menu");return C(s,t),a(this).closest(".g-dropdown-button").toggleClass("button-open"),void(i.offset().top>a(window).height()-i.outerHeight()?i.addClass("more-list-up"):i.removeClass("more-list-up"))}var n=a(this).index();m.triggerClick(n,{filesList:[t],position:[e]})}).delegate(".g-button-menu","click",function(){if(b.parent.isLocked())return!1;var e=parseInt(a(this).closest(".list-view-item")[0].getAttribute("_position"),10),t=b.getElementDataByPosition(e),i=a(this).index();m.triggerClick(i,{filesList:[t],position:[e]}),a(this).closest(".g-dropdown-button").removeClass("button-open")}).delegate(".operate","click",function(e){return b.parent.isLocked()?!1:void e.stopPropagation()}).delegate(".checkbox","click",function(e){var t=0,i=(new Date).getTime();if(b.parent.isLocked())return!1;e.stopPropagation();var s=a(this).closest(".list-view-item"),t=parseInt(s.attr("_position"),10),n=b.isItemChecked(t);b.setItemChecked(t,!n),n?s.removeClass("item-active"):s.addClass("item-active"),t=parseInt(a(this).parent()[0].getAttribute("_position"),10),f=t;var r=(new Date).getTime();h.log.send({name:"listListMultiSel",value:r-i})}).delegate(".checkbox","dblclick",function(e){e.stopPropagation()}).delegate(".search-feild","click",function(e){e.stopPropagation(),l.assignUrlHash("list/path="+encodeURIComponent(a(e.target).data("path"))+"&vmode="+l.getCurrentParams().vmode)}),d.bind("dblclick",function(){if(b.parent.isLocked())return!1;var e=parseInt(a(this)[0].getAttribute("_position"),10),t=b.getElementDataByPosition(e);if(t.isdir)b.parent.cache.cacheName===p.SEARCH||b.parent.cache.cacheName===p.SEARCHGLOBAL||b.parent.cache.cacheName===p.SEARCHPATH?l.assignUrlHash("list/path="+encodeURIComponent(t.path)+"&vmode="+l.getCurrentParams().vmode):b.parent.addHistory(t.server_filename,t.server_filename);else{var i=d.data("plugin");if(!i||!i.length)return!0;g.trigger("plugin:"+i,{filesList:[t]})}return!1}),s.setAttribute("_installed",1)}var x=r.getInfo(n.path,n.isdir,!0);if(v){if(1==n.category||3==n.category){var A=n.thumbs.url1.replace(/size=.*&/,"size=c50_u50&").replace(/&quality=100/,"&quality=80");d.find(".fileicon").css("background","url("+A+") 50% 50% no-repeat")}else d.find(".fileicon").removeAttr("style");d.find(".fileicon").attr("class","fileicon "+x.middleIcon)}else d.find(".fileicon").attr("class","fileicon "+x.smallIcon);if(n.isdir||x.plugin?(d.addClass("open-enable"),d.data("plugin",x.plugin)):(d.removeClass("open-enable"),d.data("plugin","")),v&&n.highlighting.filename?d.find(".filename").html(n.highlighting.filename).attr("title",x.fileName).data("filename",n.server_filename):d.find(".filename").html(x.name).attr("title",x.fileName).data("filename",n.server_filename),v){var L="";L+=n.highlighting&&n.highlighting.abstract?'<div node-type="name-desc" class="name name-desc" title=" '+n.highlighting.abstract.replace(/\<em\>/g,"").replace(/\<\/em\>/g,"")+'">':'<div node-type="name-desc" class="name name-desc" title="">',L+='<span class="name-text-wrapper">',L+=n.highlighting.abstractFixed?'<span node-type="name-text" class="name-text">'+n.highlighting.abstractFixed+"</span>":'<span node-type="name-text" class="name-text">'+(n.highlighting.abstract||"")+"</span>",L+="</span></div>",0===d.find(".name-desc").length?d.find(".file-name").append(L):d.find(".name-desc").html(L)}if(d.find(".file-size").text(n.isdir?"-":o.toFriendlyFileSize(n.size)),n.server_mtime||(n.server_mtime="-"),d.find(".ctime").text("-"===n.server_mtime?n.server_mtime:c.parseDate(n.server_mtime)),this.parent.cache.cacheName===p.SEARCH||this.parent.cache.cacheName===p.SEARCHGLOBAL||this.parent.cache.cacheName===p.SEARCHPATH){var H=n.path.split("/"),I="",_="";2===H.length?(I="/",_="全部文件"):(I=H.slice(0,H.length-1).join("/"),_=H[H.length-2]),d.find(".search-feild").data("path",I).attr("title",_).text(_)}return s};i.exports={getView:y,buildView:v,clear:b}});
;define("disk-system:widget/pageModule/list/grid-view/grid-view-builder.js",function(e,t,i){var s=e("base:widget/libs/jquerypacket.js"),a=(e("system-core:data/faceData.js").getData(),e("disk-system:widget/system/fileService/fileOperate/fileOperate.js")),n=e("base:widget/historyManager/historyManager.js"),r=(e("base:widget/tools/service/tools.date.js"),e("base:widget/tools/service/tools.format.js"),e("disk-system:widget/system/util/lazyLoadImage.js")),l=e("system-core:system/baseService/message/message.js"),c=e("system-core:context/context.js").instanceForSystem,o={LIST:"list",CATEGORY:"category",SEARCHPATH:"searchPath",SEARCHGLOBAL:"searchGlobal",SEARCH:"search"},d=function(){var e=document.createElement("dd");e.className="g-clearfix";var t=[];t.push('<div class="grid-view-item">'),t.push('<div class="fileicon" title="">'),t.push('<img class="thumb"/>'),t.push('<span node-type="checkbox" class="checkbox"></span>'),t.push('<span class="playIcon"></span>'),t.push("</div>"),t.push('<div class="file-name">'),t.push('<a node-type="name" class="filename" href="javascript:void(0);" title=""></a>'),t.push("</div>"),t.push("</div>");for(var i=[],s=0;s<this._mGridStep;s++)i.push(t.join(""));return e.innerHTML=i.join(""),e},m=0,u=null,h=null,g=function(){u=null,h=null},v=function(e,t,i){var r,d,g=t;null==g&&(g=this.buildView(e,t,i));for(var v,p=this._mElementsData[i],y=s(g),b=this,C=this._mGridStep,I=y.find(".grid-view-item"),k=0;k<p.length;k++){if(v=p[k],r=I[k],d=s(r),r.style.display="block",r.setAttribute("_position",i),this.isAllItemChecked()||this.isItemChecked(i*C+k)?d.addClass("item-active"):d.removeClass("item-active hover-item"),!r.getAttribute("_installed")){var L,w;d.mouseover(function(){if(L=(new Date).getTime(),b.parent.isLocked())return!1;var e=s(this);return e.addClass("hover-item"),!1}).mouseout(function(){if(b.parent.isLocked())return!1;var e=s(this);return e.removeClass("hover-item"),w=(new Date).getTime(),c.log.send({name:"gridListHover",value:w-L}),!1}),d.bind("click dblclick",function(e){var t=(new Date).getTime();if(b.parent.isLocked())return!1;var i,a=s(this),r=parseInt(a.attr("_position"),10),d=a.index(),g=r*C+d,v=b.getElementsData()[g],f=b.isItemChecked(g),p=!1;if(e.shiftKey){b.setItemsChecked(!1);var y=m,I=g;if(I>y)for(;I>=y;)b.setItemChecked(y,!0),y++;else if(y>I)for(;y>=I;)b.setItemChecked(y,!0),y--;else b.setItemChecked(y,!0);b.requestLayout(),u=g}else{if(!e.ctrlKey){if(v.isdir)return b.setItemsChecked(!1),filename=v.server_filename,b.parent.cache.cacheName===o.SEARCH||b.parent.cache.cacheName===o.SEARCHGLOBAL||b.parent.cache.cacheName===o.SEARCHPATH?n.assignUrlHash("list/path="+encodeURIComponent(v.path)+"&vmode="+n.getCurrentParams().vmode):b.parent.addHistory(v.server_filename,v.server_filename),!1;var k=a.data("plugin");if(k&&k.length)return l.trigger("plugin:"+k,{filesList:[v]}),!1;m=g,i=b.getCheckedIndexs(),i.length>0&&(f===!1||f&&i.length>1)&&(b.setItemsChecked(!1),p=!0),f&&i.length>1&&(f=!1)}u=g,h=null,b.setItemChecked(g,!f),p?b.requestLayout():f?a.removeClass("item-active"):a.addClass("item-active")}var L=(new Date).getTime();return c.log.send({name:"gridListSingleSel",value:L-t}),!1}).delegate(".checkbox","click",function(e){var t=(new Date).getTime();if(b.parent.isLocked())return!1;e.stopPropagation();var i=s(this).closest(".grid-view-item"),a=parseInt(i.attr("_position"),10),n=i.index(),r=a*C+n,l=b.isItemChecked(r);b.setItemChecked(r,!l),m=r,l?i.removeClass("item-active"):i.addClass("item-active");var o=(new Date).getTime();c.log.send({name:"gridListMultiSel",value:o-t})}).delegate(".checkbox","dblclick",function(e){e.stopPropagation()}),r.setAttribute("_installed",1)}var A=a.getInfo(v.path,v.isdir);d.find(".playIcon").remove(),"fileicon-large-video"===A.largeIcon&&(d.find(".fileicon").append('<span class="playIcon"></span>'),d.mouseenter(function(){s(this).find(".playIcon").show()}).mouseleave(function(){s(this).find(".playIcon").hide()})),d.find(".fileicon").attr("class","fileicon "+A.largeIcon),v.isdir||A.plugin?(d.addClass("open-enable"),d.data("plugin",A.plugin)):(d.removeClass("open-enable"),d.data("plugin",""));var _,S,j=d.find(".fileicon img");j.removeAttr("src"),4!==v.category&&v.thumbs&&v.thumbs.url1?(S=v.thumbs.url1.replace("size=c140_u90","size=c180_u194"),(_=f.loadedImgMap[S])?(j.removeAttr("_src").attr("src",_.src).css({left:_.left,top:_.top,visibility:"visible"}),j.parent().attr("class","fileicon")):j.removeAttr("src").attr("_src",S).css("visibility","hidden")):j.removeAttr("_src").removeAttr("src").css("visibility","hidden"),d.find(".filename").html(A.name).attr("title",A.fileName).data("filename",v.server_name)}if(p.length!=C)for(var T=p.length;C>T;++T)I[T].style.display="none";return g},f={lazyLoadImagePlugin:null,loadedImgMap:{},init:function(){var e=this;this.lazyLoadImagePlugin=new r({succ:e.imgLoadedSuccessFunc,fail:e.imgLoadedFailFunc,context:e})},imgLoadedSuccessFunc:function(e,t){e=s(e);var i,a=0,n=0,r=e.width(),l=e.height();r>0&&l>0&&(a=(90-r)/2,n=(92-l)/2),i={left:a,top:n,visibility:"visible"},e.css(i).removeAttr("_src");var o=e.attr("src");if(!o)return!1;var d=o.replace(/http:\/\/d[0-9]\./,"http://d.");i.src=o,this.loadedImgMap[d]=i,e.parent().attr("class","fileicon"),c.log.send({name:"s_imgLoad",value:t})},imgLoadedFailFunc:function(e){e=s(e),e.removeAttr("src"),e.removeAttr("_src")},imgPreLoadcallback:function(){},loadBeforeCheck:function(){},load:function(e){this.lazyLoadImagePlugin.changeImages(e.find(".thumb[_src]"))}};f.init();var p=-1,y=function(){var e=this,t=e.parent;clearTimeout(p),p=setTimeout(function(){f.load(t.$gridViewContainer)},200)};i.exports={getView:v,buildView:d,onScroll:y,clear:g}});
;define("disk-system:widget/pageModule/list/list-view-empty/list-view-empty.js",function(e,o,t){var d=e("base:widget/libs/jquerypacket.js"),i=e("base:widget/hash/hash.js"),n={dom:{module:"div.module-list",searchEmptyModule:"div.empty-search-container",viewEmptyModule:"div.module-list-view-empty",noResultTcode:'a[node-type~="no-result-twocode-btn"]',noResultTcodePic:'div[node-type~="no-result-twocode-pic"]',noResultTcodeClose:'a[node-type~="no-result-twocode-close"]',newDirBox:'input[node-type~="new-dir-box"]',newDir:'div[node-type~="new-dir"]'},bindEvent:function(){var e=!1,o=d(n.dom.module);o.delegate(n.dom.noResultTcode,"mouseover",function(){d(n.dom.noResultTcodePic).show()}),o.delegate(n.dom.noResultTcodePic,"mouseover",function(){e=!0}),o.delegate(n.dom.noResultTcodePic,"mouseleave",function(){d(n.dom.noResultTcodePic).hide()}),o.delegate(n.dom.noResultTcode,"mouseout",function(){setTimeout(function(){e||(d(n.dom.noResultTcodePic).hide(),e=!1)},200)}),o.delegate(n.dom.noResultTcodeClose,"click",function(){d(n.dom.noResultTcodePic).hide()})},tmpl:{emptyViewContainer:'<div class="clearfix module-list-view-empty" style="" node-type="module"><div node-type="new-dir" class="item global-clearfix" style="display: none;"><div class="col c1" style="width: 60%;"><span class="chk"><span class="chk-ico"></span></span><span class="ico global-icon-16 global-icon-16-dir"></span><div class="edit-name" style="display: block;"><input node-type="new-dir-box" class="box" type="text" value=""><span node-type="new-dir-sure" class="sure"></span><span node-type="new-dir-cancel" class="cancel"></span></div></div><div class="col" style="width: 16%">-</div><div class="col" style="width: 23%">-</div></div><div class="no-result-file-download"><div class="no-result-file-caption"></div><div class="no-result-title no-result-file-bottom"><a hidefocus="true" class="no-result-download-phone" href="http://pan.baidu.com/download#android" target="_blank">手机版下载</a><a hidefocus="true" class="no-result-download-twocode" node-type="no-result-twocode-btn" href="javascript:void(0);">二维码下载</a><a hidefocus="true" class="no-result-download-ipad" href="http://pan.baidu.com/download#ipad" target="_blank">iPad版下载</a><a hidefocus="true" class="no-result-download-pc" href="http://pan.baidu.com/download" target="_blank">PC版下载</a><div class="no-result-file-twocode" node-type="no-result-twocode-pic"><a hidefocus="true" node-type="no-result-twocode-close" href="javascript:void(0);">关闭</a></div></div></div></div>',emptySearchContainer:'<div class="empty-search-container"><div class="search-empty-box"><div class="search-empty-text"><i class="search-little-icon"></i>你的网盘中，没有找到相应内容</div></div></div>'},util:{render:function(){d(n.tmpl.emptyViewContainer).appendTo(n.dom.module),d(n.tmpl.emptySearchContainer).appendTo(n.dom.module)}},init:function(){n.bindEvent()}};d(document).ready(function(){n.init()});var s={emptyView:function(){var e=i.get("search/key")||i.get("search/vmode")&&i.get("key");return e?n.tmpl.emptySearchContainer:n.tmpl.emptyViewContainer}};t.exports=s});
;define("disk-system:widget/pageModule/list/listInit.js",function(e,t,i){var a=e("base:widget/libs/jquerypacket.js"),r=e("system-core:context/context.js"),n=e("disk-system:widget/pageModule/list/list-view/list-view-builder.js"),s=e("disk-system:widget/pageModule/list/grid-view/grid-view-builder.js"),o=e("system-core:system/cache/listCache/cacheManage.js"),c=e("disk-system:widget/system/fileService/createNewDir/createNewDir.js"),l=e("disk-system:widget/system/fileService/fileDelete/fileDelete.js"),d=e("disk-system:widget/system/fileService/fileMoveCopy/fileMoveCopy.js"),u=e("system-core:data/faceData.js").getData(),g=e("system-core:system/baseService/message/message.js"),h=e("base:widget/historyManager/historyManager.js"),f=e("base:widget/tools/tools.js"),m=e("base:widget/storage/storage.js"),v=e("disk-system:widget/pageModule/list/list-view-empty/list-view-empty.js"),y=e("disk-system:widget/system/uiRender/buttonBox/buttonBox.js"),p="list",C="dir",w="category",k="search",b=".module-list",P="module-list-multselected",B={listViewContainer:".list-view",gridViewContainer:".grid-view",listViewItem:".list-view-item",gridViewItem:".grid-view-item"},S=a(b),I=!0,M=function(){var e={defaultViewModle:p};e.historyConfig=_(),e.listConfig=x(),e.listViewBuilder=F(),e.gridConfig=L(),e.gridViewBuilder=V(),e.listToolsConfig=E();var t=r.instanceForSystem.ui.list(b,e);r.setList(t);var i=e.listToolsConfig;i.container=t.listHeader.getOperateContainer();var a=new y(i);return t.setListTools(a),t},D={3:"全部图片",2:"全部音乐",4:"全部文档",1:"全部视频",7:"全部种子",6:"其他文件"},_=function(){var e={};return e},x=function(){var e={defaultScroll:!0};return e},F=function(){return n},L=function(){var e={defaultScroll:!0,columnWidth:146};return e},V=function(){return s},E=function(){var e=u.getButton("listTools"),t={name:"listTools",limit:8,outSize:36,resize:!0,buttons:e};return t},A=M();A.onListOrderChange=function(e,t){var i="localorder_"+(yunData.MYNAME||"").replace(/@/g,"");if(e){var a=e+"_"+t;"undefined"!=typeof localStorage&&localStorage.setItem(i,a)}else if("undefined"!=typeof localStorage&&"function"==typeof localStorage.getItem){var r,a=localStorage.getItem(i),n=h.getCurrentParams();if("undefined"!=typeof n&&"3"===n.type)return null;if(a&&2===(r=a.split("_")).length){var r=a.split("_"),s=parseInt(r[1],10),o={item:r[0],desc:s};return o}return null}};var T=function(e){e&&-1==e.errno?r.instanceForSystem.ui.tip({msg:'由于您的帐号存在违规行为，帐号已被封禁。<a href="http://help.baidu.com/add?prod_id=48">申诉</a>',mode:"caution",autoClose:!1,hasClose:!0}):e&&e.errno&&r.instanceForSystem.ui.tip({msg:r.instanceForSystem.errorMsg(e.errno)||"网络错误，请稍候重试",mode:"caution",autoClose:!1,hasClose:!0}),A.updateLoadingTips(2,0),A.listEmptyTip(A.$emptyTips)},j=function(){var e,t,i=A.onListOrderChange();i&&(e=i.item,t="number"==typeof i.desc?i.desc:1);var a={api:"/api/list",params:{order:e||"time",desc:void 0!==t?t:1,showempty:0,web:1},limit:100,currentPage:0,listKey:"list",getParamsBykey:function(e){return{dir:e}},getPageParams:function(e,t){return{page:e+1,num:t}},getKeyByParams:function(e){return e.dir},failCallBack:function(e,t){T(e,t)}};return a},H=function(){var e,t,i=A.onListOrderChange();i&&(e=i.item,t="number"==typeof i.desc?i.desc:1);var a={api:"/api/categorylist",params:{order:e||"time",desc:void 0!==t?t:1,showempty:0,web:1},limit:100,currentPage:0,listKey:"info",getParamsBykey:function(e){return{category:e}},getPageParams:function(e,t){return{page:e+1,num:t}},getKeyByParams:function(e){return e.category},failCallBack:function(e,t){T(e,t)}};return a},K=function(){var e={api:"/api/search",params:{recursion:1,order:"time",desc:1,showempty:0,web:1},limit:100,currentPage:0,listKey:"list",getParamsBykey:function(e){return{key:e}},getPageParams:function(e,t){return{page:e+1,num:t}},getKeyByParams:function(e){return e.key},failCallBack:function(e,t){T(e,t)}};return e},N=function(){var e={api:"/api/filemetas",params:{recursion:1,order:"time",desc:1,showempty:0,web:1},limit:100,currentPage:0,listKey:"info",getParamsBykey:function(e){return{target:a.stringify([e])}},getPageParams:function(e,t){return{page:e+1,num:t}},getKeyByParams:function(e){return e.target},failCallBack:function(e,t){T(e,t)}};return e},O=function(){var e={api:"/api/textsearch",params:{recursion:1,order:"time",desc:1,showempty:0,web:1},limit:100,currentPage:0,listKey:"list",getParamsBykey:function(e){return{key:e}},getPageParams:function(e,t){return{start:e*t,limit:t}},getKeyByParams:function(e){return e.key},failCallBack:function(e,t){T(e,t)}};return e},$=h.getDefault(),Y=new o("list",j(),""),z=new o("category",H(),""),R=new o("searchPath",N(),""),G=new o("searchGlobal",O(),""),W=new o("search",K(),"");g.listen("system-show-view-mode",function(e){return A.isLocked()?void(e.returnValue=!1):void St(e.type)}),g.listen("header-search",function(e){e+="",e?Bt(e):Pt(["/"])}),A.onViewModuleChange=function(e){g.trigger("system-update-view-mode",{type:e}),A.listHeader.changeVmode({type:e})};var q=new c(b),Q=function(){(new Date).getTime();if(q.flagExists())return void q.focus();var e={path:"/-",server_filename:"-",isdir:1,server_mtime:"-"};A.setItemsChecked(!1,!0),A.cache.addDataBefore(e),A.refreshList();var t=A.cache.getKey(),i=t,a=A.cache.cacheName;t="/"===t?"":t,t+="/新建文件夹",tt.flagAdding=!0;var n={viewClassName:A.isGridMode()?"module-edit-name-grid":"",path:t,position:{left:0,top:73},successFunc:function(e,t){J(a,i,t)},cancelFunc:function(){U()}};q.show(n),A.lock(!0);var s=(new Date).getTime();r.instanceForSystem.log.send({name:"listInsertItem",value:s-s})},U=function(){tt.flagAdding=!1,A.lock(!1),A.cache.removeByIndex(0),A.refreshList()},J=function(e,t,i){tt.flagAdding=!1,A.lock(!1),A.setItemsChecked(!1,!0),o.replaceSingleCache(e,t,i)};g.listen("system-newdir",function(){Q()});var X=function(){tt.flagEditing=!1,A.lock(!1),A.setItemsChecked(!1);var e=_t.deleteCacheByMode(ct,A.cache,[]);A.getCurrentView().updateBackedData(e.list)},Z=function(){tt.flagEditing=!1,A.lock(!1)},et=function(e,t){if(q.flagExists())return void q.focus();tt.flagEditing=!0;var i=e.path,a={rename:!0,viewClassName:A.isGridMode()?"module-edit-name-grid":"",path:e.path,position:t,successFunc:function(t){var a=f.parseFullDirFromPath(e.path),r=a+"/"+t;e.path=r;var n=!1;e.server_filename&&t&&e.server_filename.lastIndexOf(".")!==t.lastIndexOf(".")&&(n=!0),e.server_filename=t,e.highlighting&&e.highlighting.filename&&(e.highlighting.filename=t),X(e,i,a,n)},cancelFunc:function(){Z()},cacheMod:A.cache.cacheName};q.show(a),A.lock(!0)},tt={flagEditing:!1,flagAdding:!1};g.listen("system-rename",function(e){var t=d.manageStatus();if(!t&&!A.isLocked()){var i=e.position,r=e.list;if(!i){var n=A.getCheckedItems();n.length===r.length&&r[0]===A.getCheckedItems()[0]&&(i=A.getCheckedIndexs())}if(i&&i.length>0){A.fixTargetPositionVisible(i[0]);var s=A.getDomByPosition(i[0]);if(!s)return;var o=S.offset(),c=a(s).offset(),l=c.left-o.left-10,u=c.top-o.top;A.isGridMode()&&(u-=4),et(r[0],{left:l,top:u})}}});var it=function(e){var t,i=e&&e.path;"undefined"!=typeof e&&e.all===!0?_t.removeCacheAll():e&&e.flagChangeSuffix||("undefined"!=typeof i&&(i=i||"/",_t.removeCache(i)),ct===p?(t=h.getCurrentParams(),i=t.path||"/",i&&_t.removeCache(i)):ct===w?_t.removeCategoryCache():ct===k&&_t.removeSearchCache()),A.refreshList()};g.listen("system-refresh",function(e){it(e)});var at=function(e,t,i){for(var a=[],r=0,n=e.length;n>r;r++)a.push(e[r].path);t instanceof Array||(t=A.cache.getIndexsByFiles(e)),l.deleteFiles(a,function(t,a,r){if(0===t){var r=_t.deleteCacheByMode(ct,A.cache,e);A.setItemsChecked(!1,!0),A.updateLoadingTips(r.hasMore?1:2,r.list.length),A.getCurrentView().updateBackedData(r.list)}"function"==typeof i&&i.call(null,t,a)})};g.listen("system-delete",function(e){var t=d.manageStatus();if(!t&&!A.isLocked()){var i=e.list;i&&i.length>0&&at(i,A.getCheckedIndexs())}});var rt=function(e){if("move"===e){var t=_t.deleteCacheByMode(ct,A.cache,st);A.setItemsChecked(!1,!0),A.updateLoadingTips(t.hasMore?1:2,t.list.length),A.getCurrentView().updateBackedData(t.list)}else var t=_t.deleteCacheByMode(ct,A.cache,[])},nt=function(){},st=[];g.listen("system-copy",function(e){var t=d.manageStatus();if(!t&&!A.isLocked()){var i=e.list;st=i,i&&i.length>0&&d.showDialog(i,"copy",rt,nt)}}),g.listen("system-move",function(e){var t=d.manageStatus();if(!t&&!A.isLocked()){var i=e.list;st=i,i&&i.length>0&&d.showDialog(i,"move",rt,nt)}}),A.onCheckeChanged=function(e){e>1?S.addClass(P):S.removeClass(P)},A.onLockChanged=function(){},A.onLoadedCallBack=function(e){I&&"undefined"!=typeof alog&&"undefined"!=typeof alog.fire&&(alog("speed.set","c_pd",+new Date),alog.fire("mark"),I=!1);var t=this.cache.cacheName;if("searchPath"===t&&a(A.getDomByPosition(0)).trigger("dblclick"),"searchGlobal"===t&&0===e.length){var i=h.getCurrentParams().key,r=this.cache.getCache();if(!(r&&r[i]&&r[i].list.length)){ct=k;var i=h.getCurrentParams().key;if(A.changeCache(W),i+=""){var n=["",i],s=["全部文件",'搜索："'+i+'"'];A.changeHistory(n,s)}else Pt(["/"]);ot()}}g.trigger("after-list-loaded")},A.mapFirstFileByCategory=function(e,t){var i=null;if(e.length<=0)return i;i={};var r=A.getFirstPosition();if(0>r)return i;for(var n,s,o=A.getDomByPosition(r),c=null;null!==o&&e.length>0;){if(c=A.getElementDataByPosition(r),c&&!c.isdir&&c.server_filename&&(n=f.getFileCategory(c.server_filename))&&n&&(n="."+n,!i[n]&&(s=a.inArray(n,e))>=0&&(e.splice(s,1),t.call(null,n,a(o)))))return;o=A.getDomByPosition(++r)}},A.getIndexsByFiles=function(e){return A.cache.getIndexsByFiles(e)},A.remove=function(e,t){at(e,null,t)},A.removeCacheByPath=function(e){_t.removeCache(e)};var ot=function(){F().clear(),V().clear()},ct=p,lt=function(e,t){var i=h.buildHistory(e,t);$.addHistory(i)},dt=function(e,t){var i=e.vmode;A.setViewModule("grid"===i?"grid":"list",t),ft()},ut=function(e,t){return g.trigger("system-change-toolbar",{module:A.cache.cacheName}),"category"===e&&3===t?void r.instanceForSystem.toolbar.showTimelineDom():void r.instanceForSystem.toolbar.showDefault()},gt=function(){var e,t,i=A.onListOrderChange();i&&(e=i.item,t="number"==typeof i.desc?i.desc:1);var a=[{order:e||"time",desc:void 0!==t?t:1,operateOrderKey:function(){},columns:[{name:"文件名",key:"name",checkbox:!0,width:60},{name:"大小",key:"size",width:16},{name:"修改日期",key:"time",width:23}],module:["list","category"]},{order:"time",desc:1,columns:[{name:"文件名",key:"name",checkbox:!0,width:60,order:!1},{name:"大小",key:"size",width:16,order:!1},{name:"修改日期",key:"time",width:13,order:!1},{name:"所在目录",key:"path-info",width:10,order:!1}],module:["searchPath","searchGlobal","search"]}];return a},ht=function(e){for(var t=gt(),i=A.cache&&A.cache.cacheName,r=e.cacheName,n=null,s=[],o=0;o<t.length;o++){if(n=t[o],s=n.module,-1!==a.inArray(i,s)&&-1!==a.inArray(r,s)&&"category"!==r)return;if(-1!=a.inArray(r,s))return A.changeHeaderConfig(n),e.config.params.order=n.order,void(e.config.params.desc=n.desc)}},ft=function(){q&&(tt.flagEditing||tt.flagAdding)&&q.cancel()},mt=function(e){F().clear();var t=e.path;"undefined"==typeof t&&(t=""),dt(e),Ct(t),ut("list",t),ot()},vt=function(e){lt(p,e)},yt=function(e){var t=e.type,i=parseInt(t,10);dt(e),wt(i),ut("category",i),ot()},pt=function(e){var t=e.key,i=e.searchpath;g.trigger("header-search-val",t),dt(e),i?kt(t,i):bt(t),ut("search",t),ot()},Ct=function(e){ct=p,ht(Y),A.changeCache(Y),"/"===e&&(e=""),/\S\/+$/.test(e)&&(e=e.replace(/\/+$/,""));var t=e.split("/"),i=t.slice();t[0]="/",i[0]="全部文件",A.changeHistory(t,i)},wt=function(e){ct=w,ht(z),A.changeCache(z);var t=D[e];if(t){var i=[e],a=[t];A.changeHistory(i,a)}else Pt(["/"])},kt=function(e,t){if(ct=k,ht(R),A.changeCache(R),e+=""){var i=["",t],a=["全部文件",'搜索："'+e+'"'];A.changeHistory(i,a)}else Pt(["/"])},bt=function(e){if(ct=k,+yunData.ISYEARVIP?(ht(G),A.changeCache(G)):(ht(W),A.changeCache(W)),!+yunData.ISYEARVIP)var t=function(e){return a('<div node-type="upload-bar" class="upload-bar global-clearfix search-toolbar"><a node-type="btn-close" href="javascript:void(0);" class="close"></a><span node-type="ico-s" class="ico-s ico-search"></span><span node-type="msg-text" class="text">全文检索特权上线啦！成为<a class="vip-help" href="/buy/center?tag=4#FAQ_YEARVIP" style="text-decoration: underline;" target="_blank">年费会员</a>即可搜索office、pdf等文档里面的文字了</span><a class="g-button download" node-type="download-link" href="/buy/center?tag=1&usertype='+e+'&from=search"><span class="g-button-right"><span class="text">购买年费会员</span></span></a></div>')};if(!+yunData.ISYEARVIP){var i,n,s;+yunData.ISVIP?(s=3,n=m.getItem("search_vip_guide3_"+yunData.MYNAME),i=t("vip")):(s=1,n=m.getItem("search_vip_guide1_"+yunData.MYNAME),i=t("novip")),n||(i.find(".close").click(function(){m.setItem("search_vip_guide"+s+"_"+yunData.MYNAME,1),r.instanceForSystem.toolbar.prevDom(!1)}),r.instanceForSystem.toolbar.prevDom(i,!0))}if(e+=""){var o=["",e],c=["全部文件",'搜索："'+e+'"'];A.changeHistory(o,c)}else Pt(["/"])};A.extend({getCheckMsg:function(e){return"已选中"+e+"个文件/文件夹"},resizeScrollBar:function(e){var t=this.$container;if("number"==typeof e||"string"==typeof e?t.height(e):e=t.height(),0===e)throw"[Error] list container's height is 0, need to set";t.height(e);var i=this.listHeader.hasInit===!1?0:43;"none"===t.find(".module-history-list").css("display")?(t.find(".module-list-view").height(e-i).find(".scrollbar-tracker").height(e-i-2-26),t.find(".module-grid-view").height(e-i).find(".scrollbar-tracker").height(e-i-2-26)):(t.find(".module-list-view").height(e-73).find(".scrollbar-tracker").height(e-73-2-26),t.find(".module-grid-view").height(e-73).find(".scrollbar-tracker").height(e-73-2-26))}}),A.addHistory=function(e){var t=A.getHistoryIds();t=t?t.slice():[],t.push(e),Pt(t)},A.goHistory=function(e,t){var i=h.getCurrentParams(),a={};i.vmode&&(a.vmode=i.vmode),t?/\S\/+$/.test(t)&&(t=t.replace(/\/+$/,"")):t="/",a.path=t,lt(e,a)};var Pt=function(e){ct=p,1!==e.length&&(e[0]="");var t=h.getCurrentParams(),i={};t.vmode&&(i.vmode=t.vmode);var a=e.join("/");/\S\/+$/.test(a)&&(a=a.replace(/\/+$/,"")),i.path=a,lt(ct,i)},Bt=function(e){ct=k;var t=h.getCurrentParams(),i={};t.vmode&&(i.vmode=t.vmode),i.key=e,lt(ct,i)},St=function(e){var t=h.getCurrentParams();t.vmode="grid"===e?"grid":"list",lt(ct,t)};A.getHistoryList().goToHistory=function(e){if(!(e>=this.historyList.length||0>e)){if(ct===k)return g.trigger("header-search-val",""),void Pt(["/"]);var t=this.historyList.slice();t.splice(e,this.historyList.length),Pt(t)}},$.listen(p,mt),$.listen(C,vt),$.listen(w,yt),$.listen(k,pt);var It=function(){var e=h.getCurrentHash();return e&&e.length>1&&e[1]&&(e[0]===p&&e[1]&&e[1].path||e[0]===w&&e[1]&&e[1].type||e[0]===k&&e[1]&&e[1].key||e[0]===C&&e[1]&&e[1].path)?(ct=e[0],!0):!1};It()?h.interpretCurrentWindow():A.addHistory("/","全部文件");var Mt=function(){ft();var e=a(window).height()-S.offset().top;A.resize(e)};A.listHeader.canTriggerOrder=function(){return tt.flagEditing||tt.flagAdding?!1:!0},A.cancelEidtingDir=function(){ft()},A.cancelFilesSelect=function(){S.find(".list-view-item").removeClass("item-active"),S.find(".grid-view-item").removeClass("item-active"),A.setItemsChecked(!1,!0)};var Dt=function(){var e=-1;a(window).resize(function(){clearTimeout(e),e=setTimeout(function(){Mt()},300)})};Dt();var _t={getCache:function(){return o.getCache()},deleteCacheByMode:function(e,t,i){var a=t.getDataByKey();this.removeCacheAll();for(var r=a&&a.list,n=!1,s="",o="",c=r.length,l=c-1;l>=0;l--){for(var d=i.length,u=d-1;u>=0;u--)s=i[u],o=s.path||s,r[l].path==o&&(i.splice(u,1),n=!0);n&&(r.splice(l,1),n=!1)}return a.list=r,_t.getCache()[t.cacheName].data[t.getKey()]=a,a},removeCacheByPath:function(e){var t=this.getCache(),i={};t&&t.list&&t.list.data&&(i=t.list.data),i[e]&&delete i[e]},removeCacheAll:function(){var e=this.getCache();for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].data&&(e[t].data={})},removeCache:function(e,t,i){var a=this.getCache(),r={};a&&a.list&&a.list.data&&(r=a.list.data),this.removeSubFiles(r,e),"move"===t&&this.removeSubFiles(r,i),this.removeOtherListCache()},removeSubFiles:function(e,t){t="/"===t?t:t+"/";for(var i in e)e.hasOwnProperty(i)&&0===(i+"/").indexOf(t)&&delete e[i]},removeOtherListCache:function(){this.removeCategoryCache(),this.removeSearchCache(),this.removeTreeCache()},removeCategoryCache:function(){this.removeCacheByKey("category")},removeSearchCache:function(){this.removeCacheByKey("search")},removeTreeCache:function(){this.removeCacheByKey("tree")},removeCacheByKey:function(e){var t=this.getCache();t&&t[e]&&t[e].data&&(t[e].data={})}};e.async("disk-system:widget/pageModule/mouse-utils/mouse-select.js",function(e){new e({$dom:a(B.listViewContainer),item:B.listViewItem,viewMod:"list",selectClass:"item-active",list:A,canSelect:function(){return A.isLocked()?!1:void 0}}),new e({$dom:a(B.gridViewContainer),item:B.gridViewItem,vieMod:"grid",selectClass:"item-active",list:A,canSelect:function(){return A.isLocked()?!1:void 0}})});var xt=function(e){var t=A.getCheckedItems();st=t,d.moveTo(t,e.path,rt,nt)};e.async("disk-system:widget/pageModule/mouse-utils/mouse-drag.js",function(e){new e({$dom:a(B.listViewContainer),item:B.listViewItem,viewMod:"list",selectClass:"item-active",list:A,onDragEndCallback:xt}),new e({$dom:a(B.gridViewContainer),item:B.gridViewItem,viewMod:"grid",selectClass:"item-active",list:A,onDragEndCallback:xt})});var Ft=function(e){"move"===e||"delete"===e?(_t.removeCache(A.cache.getKey(),e),A.refreshList()):(_t.removeCacheByKey("list"),A.refreshList())};setTimeout(function(){if("undefined"!=typeof localStorage&&"function"==typeof localStorage.getItem){var e,t="asynfilemanager_"+(yunData.MYNAME||"").replace(/@/g,""),i=localStorage.getItem(t);i&&2===(e=i.split("_")).length&&(localStorage.removeItem(t),d.resolveHasTask(e[0],e[1],function(e,t,i,a){1!==e&&3!==e||!a||Ft(a.operate)}))}},1500),A.listEmptyTip=function(e){A.$listHeader.hide(),e.html(v.emptyView).show()};var Lt=function(){var e=document.referrer,t="fm_self",i=/(http|https)\:\/\/(tieba|hao123)\.baidu\.com/gi,a=/(http|https)\:\/\/www\.hao123\.com/gi;return"string"==typeof e&&e.length>0&&(t=i.test(e)?"fm_"+RegExp.$2:a.test(e)?"fm_hao123":-1!==e.indexOf("http://www.baidu.com/s?wd=")?"fm_baidups":"fm_not_proved"),t};r.instanceForSystem.log.sendUserReport(Lt()),i.exports=A});
;define("disk-system:widget/pageModule/contextMenu/contextMenu.js",function(e){var t=e("base:widget/libs/jquerypacket.js"),i=e("system-core:system/uiService/rMenu/rMenu.js"),n=(e("base:widget/tools/tools.js"),e("disk-system:widget/pageModule/list/listInit.js")),o=e("system-core:system/baseService/message/message.js"),r=e("system-core:data/faceData.js").getData(),a=(e("system-core:data/regedit.js"),{target:"#layoutMain"}),s={top:[{title:"查看",variableMenu:function(){var e=[{title:"列表",keyboard:"l"},{title:"缩略图",keyboard:"g"}];return n.isGridMode()?(e[1].icon=["icon-menu-point","icon-menu-point-hover"],e[0].action=function(){o.trigger("system-show-view-mode",{type:"list"})}):(e[0].icon=["icon-menu-point","icon-menu-point-hover"],e[1].action=function(){o.trigger("system-show-view-mode",{type:"grid"})}),e},keyboard:"v"},{title:"排序方式",nextMenu:[{title:"名称",action:function(){n.updateOrder("name")}},{title:"大小",action:function(){n.updateOrder("size")}},{title:"修改日期",action:function(){n.updateOrder("time")}}],keyboard:"o"},{title:"刷新",action:function(){o.trigger("system-refresh")},keyboard:"e"}],middle:[{title:"重新加载页面",action:function(){window.location.reload()},keyboard:"r"},{title:"新建文件夹",icon:"icon-menu-createfolder",action:function(){o.trigger("system-newdir")},display:function(){var e=location.hash;return 1===e.indexOf("list")?!0:"disable"},keyboard:"e"}],bottom:[[{title:"增值服务",icon:"icon-menu-vip",action:function(){window.open(location.protocol+"//yun.baidu.com/buy/center?from=rmenu")},keyboard:"e"}]]},u=function(){if(null!==u.result)return u.result;for(var e=r.contextMenu.blank.sort(function(e,t){return e.index>t.index}),t=function(e,t){if(void 0===e.nextMenu&&void 0===e.variableMenu&&void 0===e.length){if(void 0===e.action)e.action=function(){o.trigger("plugin:"+t)};else if("string"==typeof e.action){var i=e.action;e.action=function(e){o.trigger("plugin:"+t,{run:i,dom:e})}}}else if("string"==typeof e.variableMenu){var i=e.variableMenu;e.variableMenu=function(e,n){o.trigger("plugin:"+t,{dom:e,format:n,run:i})}}},i=0,n=e.length;n>i;i++)if(delete e[i].index,"middle"===e[i].position?s.middle.push(e[i]):"bottom"===e[i].position?s.bottom.push(e[i]):s.top.push(e[i]),e[i].length)for(var a=0,c=e[i].length;c>a;a++)t(e[i][a],e[i].pluginId);else t(e[i],e[i].pluginId);return s.top.push(s.middle),u.result=s.top.concat(s.bottom),u.result};u.result=null,i.bind(t(a.target)[0],u(),{beforeMenu:function(){return t(this).hasClass("module-edit-name")||t(this).closest(".module-edit-name").length?!1:(n.cancelEidtingDir(),void n.cancelFilesSelect())},afterMenu:function(){n.lock(!0)},menuHide:function(){n.lock(!1)}})});
;define("disk-system:widget/pageModule/list/listMenu.js",function(e){var i=e("base:widget/libs/jquerypacket.js"),t=e("system-core:system/uiService/rMenu/rMenu.js"),s=e("base:widget/tools/tools.js"),n=e("disk-system:widget/pageModule/list/listInit.js"),r=e("system-core:data/faceData.js").getData(),l=(e("system-core:data/regedit.js"),e("system-core:system/baseService/message/message.js")),o=void 0,a={listTarget:".list-view-container",gridTarget:".grid-view-container"},d=function(e){return"object"==typeof e&&e.server_filename&&(e=e.server_filename),s.getFileCategory(e)},f={top:[{title:"打开",action:function(){n.isGridMode()?i(this).closest(".grid-view-item").find(".filename").trigger("click"):i(this).closest(".list-view-item").find(".filename").trigger("click")},display:function(){if(n.getCheckedIndexs().length>1)return"disable";var e=i(this).closest(".list-view-item");return n.isGridMode()&&(e=i(this).closest(".grid-view-item")),e.length&&!e.hasClass("open-enable")?"disable":void 0},keyboard:"o"}],middle:[],bottom:[]},u=function(){if(null!==u.result)return u.result;for(var e=r.contextMenu.file.sort(function(e,i){return e.index-i.index}),i=function(e){var i=e.filesType,t=n.getCheckedItems(),s=!1;if("number"==typeof e.filesLimit&&t.length>e.filesLimit)s=!0;else if("string"==typeof e.filesLimit&&0===e.filesLimit.indexOf(">")){var r=parseInt(e.filesLimit.substring(1));t.length<=r&&(s=!0)}if(s===!1)for(var l=0,o=t.length;o>l;l++){var a=d(t[l]),f=t[l].path.substring(t[l].path.lastIndexOf("/")+1);if((!a||1==t[l].isdir)&&"string"==typeof e.filesType&&"*"!==e.filesType){s=!0;break}if("string"==typeof e.filesType&&"*"!==e.filesType&&-1===i.indexOf(a)){s=!0;break}if(e.excludeDirType&&-1!=e.excludeDirType.indexOf(f)){s=!0;break}}if(e.templateVar)for(var u in e.templateVar)if(e.templateVar.hasOwnProperty(u)&&yunData[u]!=e.templateVar[u]){s=!0;break}return s===!0?"disable"===e.disabled?"disable":!1:!0},t=function(e,t){if(void 0===e.nextMenu&&void 0===e.variableMenu&&void 0===e.length){if(void 0===e.action)e.action=function(){l.trigger("plugin:"+t)};else if("string"==typeof e.action){var s=e.action;e.action=function(e){l.trigger("plugin:"+t,{run:s,dom:e})}}}else if("string"==typeof e.variableMenu){var s=e.variableMenu;e.variableMenu=function(e,i){l.trigger("plugin:"+t,{dom:e,format:i,run:s})}}("string"==typeof e.filesType&&"*"!==e.filesType||"string"==typeof e.excludeDirType)&&(e.display=function(){return i(e)})},s=0,o=e.length;o>s;s++)if(delete e[s].index,"middle"===e[s].position?f.middle.push(e[s]):"bottom"===e[s].position?f.bottom.push(e[s]):f.top.push(e[s]),e[s].length)for(var a=0,c=e[s].length;c>a;a++)t(e[s][a],e[s].pluginId);else t(e[s],e[s].pluginId);return f.top.push(f.middle),u.result=f.top.concat(f.bottom),u.result};u.result=null,t.bind(i(a.listTarget)[0],u(),{beforeMenu:function(){var e=i(this).closest(".list-view-item")[0];if(!e)return!1;n.cancelEidtingDir();var t=parseInt(e.getAttribute("_position"));o=t,n.isItemChecked(t)||(n.setSingleItemChecked(t,!0),i(this).closest(".list-view-container").is(":visible")?i(this).closest(".module-list-view").find(".list-view-item").removeClass("item-active"):i(this).closest(".module-grid-view").find(".grid-view-item").removeClass("item-active"),i(e).addClass("item-active")),i(e).removeClass("hover-item")},afterMenu:function(){n.lock(!0)},menuHide:function(){n.lock(!1)}}),t.bind(i(a.gridTarget)[0],u(),{beforeMenu:function(){var e=i(this).closest(".grid-view-item")[0];if(!e)return!1;n.cancelEidtingDir();var t=parseInt(e.getAttribute("_position")),s=i(e).index();o=n.getGridPostiion(t,s),n.isItemChecked(o)||(n.setSingleItemChecked(o,!0),i(this).closest(".module-grid-view").find(".grid-view-item").removeClass("item-active"),i(e).addClass("item-active")),i(e).removeClass("hover-item")},afterMenu:function(){n.lock(!0)},menuHide:function(){n.lock(!1)}})});
;define("disk-system:widget/pageModule/mouse-utils/mouse-drag.js",function(t,i,e){function o(t){this.md=new n(t.$dom),this.$dom=t.$dom,this.item=t.item,this.viewMod=t.viewMod,this.selectClass=t.selectClass,this.list=t.list,this.onDragEndCallback=t.onDragEndCallback,this.cacheList=[],this._init()}{var n=t("base:widget/mouse-utils/mouse-drag.js");t("disk-system:widget/system/fileService/fileMoveCopy/fileMoveCopy.js")}o.prototype._init=function(){var t=this;t.onStart(),t.onSelect()},o.prototype.onStart=function(){var t=this;t.md.onStart=function(i){var e,o,n,s,a=t.$dom.find(t.item);return n=$(i.target),s=n.closest(t.item),o=s.attr("_position"),e="list"===t.viewMod?o:o*t.list.getColumnsCount()+s.index(),1!==a.length&&s.hasClass(t.selectClass)?(t.cacheList=a,t.md.setNum(t.list.getCheckedIndexs().length),!0):!1}},o.prototype.onSelect=function(){var t=this;t.md.onSelect=function(i){"list"===t.viewMod?t.listViewDrag(i):t.gridViewDrag(i)}},o.prototype.listViewDrag=function(t){var i,e,o,n,s,a,r=this;for(e=0;e<r.cacheList.length;e++)if(a=$(r.cacheList[e]),o=a.attr("_position"),!r.list.isItemChecked(o)){if(n=a.offset(),s=a.outerHeight(),n.top<t.top&&n.top+s>t.top)return i=a.data("id"),void(r.md.onDragEnd=function(){var t=r.list.getCurrentView().getElementDataByPosition(o);return t.isdir?("function"==typeof r.onDragEndCallback&&r.onDragEndCallback.call(r,t),void(r.md.onDragEnd=void 0)):!1});r.md.onDragEnd=void 0}},o.prototype.gridViewDrag=function(t){var i,e,o,n,s,a,r,d=this;for(e=0;e<d.cacheList.length;e++){r=$(d.cacheList[e]);var l=r.closest(d.item);if(o=r.attr("_position")*d.list.getColumnsCount()+l.index(),!d.list.isItemChecked(o)){if(n=r.offset(),s=r.outerHeight(),a=r.outerWidth(),n.top<t.top&&n.top+s>t.top&&n.left<t.left&&n.left+a>t.left)return i=r.data("id"),void(d.md.onDragEnd=function(){var t=d.list.getCurrentView().getElementDataByPosition(o);return t.isdir?("function"==typeof d.onDragEndCallback&&d.onDragEndCallback.call(d,t),void(d.md.onDragEnd=void 0)):!1});d.md.onDragEnd=void 0}}},e.exports=o});
;define("disk-system:widget/pageModule/mouse-utils/mouse-select.js",function(t,e,o){function i(t){this.ms=new s(t.$dom),this.$dom=t.$dom,this.item=t.item,this.viewMod=t.viewMod,this.selectClass=t.selectClass,this.list=t.list,this.canSelect=t.canSelect||null,this.cacheList=[],this.positionArray=[],this._init()}var s=t("base:widget/mouse-utils/mouse-selection.js");i.prototype._init=function(){var t=this;t.onStart(),t.onSelect(),t.onEnd()},i.prototype.onStart=function(t){var e=this;e.ms.onStart=function(o){if(null!==e.canSelect&&"function"==typeof e.canSelect&&e.canSelect()===!1)return!1;var i,s,n,l,r=e.$dom.find(e.item);return n=$(o.target),l=n.closest(e.item),s=l.attr("_position"),i="list"===e.viewMod?s:s*e.list.getColumnsCount()+l.index(),e.positionArray=[],l.hasClass(e.selectClass)?!1:(e.cacheList=r,"function"==typeof t&&t(o),!0)}},i.prototype.onSelect=function(t){var e=this;e.ms.onSelect=function(o){"list"===e.viewMod?e.listMouseSelect(o):e.gridMouseSelect(o),"function"==typeof t&&t(o)}},i.prototype.onEnd=function(t){var e=this;e.ms.onEnd=function(){e.list.setEachItemChecked(e.positionArray,!0),e.positionArray=[],"function"==typeof t&&t()}},i.prototype.listMouseSelect=function(t){var e,o,i,s,n,l=this;for(e=0;e<l.cacheList.length;e++)if(n=$(l.cacheList[e]),o=n.attr("_position"),i=n.offset(),s=n.outerHeight(),i.top<t.top&&i.top+s>t.top||i.top>t.top&&i.top+s<t.top+t.height||i.top<t.top+t.height&&i.top+s>t.top+t.height){var r=l.positionArray.indexOf(o);-1===r&&l.positionArray.push(o),n.addClass(l.selectClass)}else{n.removeClass(l.selectClass);var r=l.positionArray.indexOf(o);r>-1&&l.positionArray.splice(r,1)}},i.prototype.gridMouseSelect=function(t){var e,o,i,s,n,l,r=this;for(e=0;e<r.cacheList.length;e++)if(n=$(r.cacheList[e]),o=parseInt(n.attr("_position"))*r.list.getColumnsCount()+n.index(),i=n.offset(),s=n.outerHeight(),l=n.outerWidth(),(i.top<t.top&&i.top+s>t.top||i.top>t.top&&i.top+s<t.top+t.height||i.top<t.top+t.height&&i.top+s>t.top+t.height)&&(i.left<t.left&&i.left+l>t.left||i.left>t.left&&i.left+l<t.left+t.width||i.left<t.left+t.width&&i.left+l>t.left+t.width)){var p=r.positionArray.indexOf(o);-1===p&&r.positionArray.push(o),n.addClass(r.selectClass)}else{n.removeClass(r.selectClass);var p=r.positionArray.indexOf(o);p>-1&&r.positionArray.splice(p,1)}},o.exports=i});
;define("disk-system:widget/pageModule/pluginPage/pluginPage.js",function(e){var s=e("base:widget/libs/jquerypacket.js"),t=e("base:widget/tools/tools.js"),g=e("system-core:system/baseService/message/message.js"),a=decodeURIComponent(decodeURIComponent(t.getParam("pluginName"))),i=t.getParam("pluginGroup"),o=t.getParam("autoExcute");"true"===o?g.trigger("plugin:"+a+"@"+i):window.loadPlugin=function(e){if(e){try{e=s.parseJSON(e)}catch(t){}g.trigger("plugin:"+a+"@"+i,{filesList:e,flag:"BDYGJ"})}}});
;define("disk-system:widget/pageModule/toolbar/toolbar.js",function(e){var i=e("base:widget/libs/jquerypacket.js"),t=e("system-core:system/baseService/message/message.js"),o=(e("base:widget/storage/storage.js"),e("system-core:data/faceData.js").getData()),s=e("system-core:context/context.js"),d=e("disk-system:widget/system/uiRender/buttonBox/buttonBox.js"),n=i(".module-toolbar"),r={listGridSwitch:".list-grid-switch",listSwitch:".list-switch",gridSwitch:".grid-switch",prevDom:"div.prev-dom",afterDom:"div.after-dom",defaultDom:"div.default-dom",userDom:"div.user-dom",timeLineDom:"div.yun-pic-bar"},a=(new d({name:"tools",container:n.find(".bar"),buttons:o.getButton("tools"),limit:4}),function(e){"undefined"!=typeof localStorage&&localStorage.setItem("chooseviewtype",e)});n.on("click",r.listSwitch,function(){if(!i(this).parent().hasClass("list-switched-on")){var e={type:"list"};a("list"),t.trigger("system-show-view-mode",e)}}),n.on("click",r.gridSwitch,function(){if(!i(this).parent().hasClass("grid-switched-on")){var e={type:"grid"};a("grid"),t.trigger("system-show-view-mode",e)}}),t.listen("system-update-view-mode",function(e){var i=n.find(r.listGridSwitch);"list"===e.type?i.addClass("list-switched-on").removeClass("grid-switched-on"):i.removeClass("list-switched-on").addClass("grid-switched-on")});var m=!1,l=!1;s.extend({toolbar:{afterDom:function(e,t){if(e){if(l)return;t===!0&&(l=!0),n.find(r.afterDom).html("").append(e).show()}else e===!1?(n.find(r.afterDom).html(""),l=!1):n.find(r.afterDom).hide();i(window).trigger("resize")},prevDom:function(e,t){if(e){if(m)return;t===!0&&(m=!0),n.find(r.prevDom).html("").append(e).show()}else e===!1?(n.find(r.prevDom).html(""),m=!1):n.find(r.prevDom).hide();i(window).trigger("resize")},showDefault:function(){n.find(r.userDom).hide(),n.find(r.defaultDom).show(),n.find(r.prevDom).children().length&&n.find(r.prevDom).show(),n.find(r.afterDom).children().length&&n.find(r.afterDom).show(),n.find(r.timeLineDom).hide(),n.removeClass("module-toolbar-hackbg")},setDom:function(e){n.find(r.defaultDom).hide(),n.find(r.prevDom).hide(),n.find(r.afterDom).hide(),n.find(r.timeLineDom).hide(),n.find(r.userDom).html("").append(e).show(),n.removeClass("module-toolbar-hackbg"),i(window).trigger("resize")},showTimelineDom:function(){n.find(r.defaultDom).hide(),n.find(r.prevDom).hide(),n.find(r.afterDom).hide(),n.find(r.userDom).hide(),n.find(r.timeLineDom).show(),n.addClass("module-toolbar-hackbg"),i(window).trigger("resize")}}})});(function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,g=e.filter,d=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,_=Object.keys,j=i.bind,w=function(n){return n instanceof w?n:this instanceof w?void(this._wrapped=n):new w(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=w),exports._=w):n._=w,w.VERSION="1.4.4";var A=w.each=w.forEach=function(n,t,e){if(null!=n)if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a in n)if(w.has(n,a)&&t.call(e,n[a],a,n)===r)return};w.map=w.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e[e.length]=t.call(r,n,u,i)}),e)};var O="Reduce of empty array with no initial value";w.reduce=w.foldl=w.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=w.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(O);return r},w.reduceRight=w.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=w.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=w.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(O);return r},w.find=w.detect=function(n,t,r){var e;return E(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},w.filter=w.select=function(n,t,r){var e=[];return null==n?e:g&&n.filter===g?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&(e[e.length]=n)}),e)},w.reject=function(n,t,r){return w.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},w.every=w.all=function(n,t,e){t||(t=w.identity);var u=!0;return null==n?u:d&&n.every===d?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var E=w.some=w.any=function(n,t,e){t||(t=w.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};w.contains=w.include=function(n,t){return null==n?!1:y&&n.indexOf===y?-1!=n.indexOf(t):E(n,function(n){return n===t})},w.invoke=function(n,t){var r=o.call(arguments,2),e=w.isFunction(t);return w.map(n,function(n){return(e?t:n[t]).apply(n,r)})},w.pluck=function(n,t){return w.map(n,function(n){return n[t]})},w.where=function(n,t,r){return w.isEmpty(t)?r?null:[]:w[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},w.findWhere=function(n,t){return w.where(n,t,!0)},w.max=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);if(!t&&w.isEmpty(n))return-1/0;var e={computed:-1/0,value:-1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>=e.computed&&(e={value:n,computed:a})}),e.value},w.min=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);if(!t&&w.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a<e.computed&&(e={value:n,computed:a})}),e.value},w.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=w.random(r++),e[r-1]=e[t],e[t]=n}),e};var k=function(n){return w.isFunction(n)?n:function(t){return t[n]}};w.sortBy=function(n,t,r){var e=k(t);return w.pluck(w.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index<t.index?-1:1}),"value")};var F=function(n,t,r,e){var u={},i=k(t||w.identity);return A(n,function(t,a){var o=i.call(r,t,a,n);e(u,o,t)}),u};w.groupBy=function(n,t,r){return F(n,t,r,function(n,t,r){(w.has(n,t)?n[t]:n[t]=[]).push(r)})},w.countBy=function(n,t,r){return F(n,t,r,function(n,t){w.has(n,t)||(n[t]=0),n[t]++})},w.sortedIndex=function(n,t,r,e){r=null==r?w.identity:k(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;r.call(e,n[o])<u?i=o+1:a=o}return i},w.toArray=function(n){return n?w.isArray(n)?o.call(n):n.length===+n.length?w.map(n,w.identity):w.values(n):[]},w.size=function(n){return null==n?0:n.length===+n.length?n.length:w.keys(n).length},w.first=w.head=w.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:o.call(n,0,t)},w.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},w.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},w.rest=w.tail=w.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},w.compact=function(n){return w.filter(n,w.identity)};var R=function(n,t,r){return A(n,function(n){w.isArray(n)?t?a.apply(r,n):R(n,t,r):r.push(n)}),r};w.flatten=function(n,t){return R(n,t,[])},w.without=function(n){return w.difference(n,o.call(arguments,1))},w.uniq=w.unique=function(n,t,r,e){w.isFunction(t)&&(e=r,r=t,t=!1);var u=r?w.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:w.contains(a,r))||(a.push(r),i.push(n[e]))}),i},w.union=function(){return w.uniq(c.apply(e,arguments))},w.intersection=function(n){var t=o.call(arguments,1);return w.filter(w.uniq(n),function(n){return w.every(t,function(t){return w.indexOf(t,n)>=0})})},w.difference=function(n){var t=c.apply(e,o.call(arguments,1));return w.filter(n,function(n){return!w.contains(t,n)})},w.zip=function(){for(var n=o.call(arguments),t=w.max(w.pluck(n,"length")),r=new Array(t),e=0;t>e;e++)r[e]=w.pluck(n,""+e);return r},w.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},w.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=w.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},w.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},w.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=r;return i},w.bind=function(n,t){if(n.bind===j&&j)return j.apply(n,o.call(arguments,1));var r=o.call(arguments,2);return function(){return n.apply(t,r.concat(o.call(arguments)))}},w.partial=function(n){var t=o.call(arguments,1);return function(){return n.apply(this,t.concat(o.call(arguments)))}},w.bindAll=function(n){var t=o.call(arguments,1);return 0===t.length&&(t=w.functions(n)),A(t,function(t){n[t]=w.bind(n[t],n)}),n},w.memoize=function(n,t){var r={};return t||(t=w.identity),function(){var e=t.apply(this,arguments);return w.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},w.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},w.defer=function(n){return w.delay.apply(w,[n,1].concat(o.call(arguments,1)))},w.throttle=function(n,t){var r,e,u,i,a=0,o=function(){a=new Date,u=null,i=n.apply(r,e)};return function(){var c=new Date,l=t-(c-a);return r=this,e=arguments,0>=l?(clearTimeout(u),u=null,a=c,i=n.apply(r,e)):u||(u=setTimeout(o,l)),i}},w.debounce=function(n,t,r){var e,u;return function(){var i=this,a=arguments,o=function(){e=null,r||(u=n.apply(i,a))},c=r&&!e;return clearTimeout(e),e=setTimeout(o,t),c&&(u=n.apply(i,a)),u}},w.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},w.wrap=function(n,t){return function(){var r=[n];return a.apply(r,arguments),t.apply(this,r)}},w.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},w.after=function(n,t){return 0>=n?t():function(){return--n<1?t.apply(this,arguments):void 0}},w.keys=_||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)w.has(n,r)&&(t[t.length]=r);return t},w.values=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push(n[r]);return t},w.pairs=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push([r,n[r]]);return t},w.invert=function(n){var t={};for(var r in n)w.has(n,r)&&(t[n[r]]=r);return t},w.functions=w.methods=function(n){var t=[];for(var r in n)w.isFunction(n[r])&&t.push(r);return t.sort()},w.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},w.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},w.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)w.contains(r,u)||(t[u]=n[u]);return t},w.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)null==n[r]&&(n[r]=t[r])}),n},w.clone=function(n){return w.isObject(n)?w.isArray(n)?n.slice():w.extend({},n):n},w.tap=function(n,t){return t(n),n};var S=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof w&&(n=n._wrapped),t instanceof w&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;r.push(n),e.push(t);var a=0,o=!0;if("[object Array]"==u){if(a=n.length,o=a==t.length)for(;a--&&(o=S(n[a],t[a],r,e)););}else{var c=n.constructor,f=t.constructor;if(c!==f&&!(w.isFunction(c)&&c instanceof c&&w.isFunction(f)&&f instanceof f))return!1;for(var s in n)if(w.has(n,s)&&(a++,!(o=w.has(t,s)&&S(n[s],t[s],r,e))))break;if(o){for(s in t)if(w.has(t,s)&&!a--)break;o=!a}}return r.pop(),e.pop(),o};w.isEqual=function(n,t){return S(n,t,[],[])},w.isEmpty=function(n){if(null==n)return!0;if(w.isArray(n)||w.isString(n))return 0===n.length;for(var t in n)if(w.has(n,t))return!1;return!0},w.isElement=function(n){return!(!n||1!==n.nodeType)},w.isArray=x||function(n){return"[object Array]"==l.call(n)},w.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){w["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),w.isArguments(arguments)||(w.isArguments=function(n){return!(!n||!w.has(n,"callee"))}),"function"!=typeof/./&&(w.isFunction=function(n){return"function"==typeof n}),w.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},w.isNaN=function(n){return w.isNumber(n)&&n!=+n},w.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},w.isNull=function(n){return null===n},w.isUndefined=function(n){return void 0===n},w.has=function(n,t){return f.call(n,t)},w.noConflict=function(){return n._=t,this},w.identity=function(n){return n},w.times=function(n,t,r){for(var e=Array(n),u=0;n>u;u++)e[u]=t.call(r,u);return e},w.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};I.unescape=w.invert(I.escape);var M={escape:new RegExp("["+w.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+w.keys(I.unescape).join("|")+")","g")};w.each(["escape","unescape"],function(n){w[n]=function(t){return null==t?"":(""+t).replace(M[n],function(t){return I[n][t]})}}),w.result=function(n,t){if(null==n)return null;var r=n[t];return w.isFunction(r)?r.call(n):r},w.mixin=function(n){A(w.functions(n),function(t){var r=w[t]=n[t];w.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),D.call(this,r.apply(w,n))}})};var N=0;w.uniqueId=function(n){var t=++N+"";return n?n+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;w.template=function(n,t,r){var e;r=w.defaults({},r,w.templateSettings);var u=new RegExp([(r.escape||T).source,(r.interpolate||T).source,(r.evaluate||T).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(B,function(n){return"\\"+q[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,w);var c=function(n){return e.call(this,n,w)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},w.chain=function(n){return w(n).chain()};var D=function(n){return this._chain?w(n).chain():n};w.mixin(w),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];w.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],D.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];w.prototype[n]=function(){return D.call(this,t.apply(this._wrapped,arguments))}}),w.extend(w.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);